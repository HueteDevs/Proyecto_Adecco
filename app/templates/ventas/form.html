<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if sala %} Editar venta {% else %} Crear venta {% endif %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <div class="container mt-5">
       <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card shadow">
                    <div class="card-header bg-primary text-white">
                        <h2 class="card-title mb-0">
                            <i class="fa-solid fa-{% if venta %} pen-to-square{% else %}plus{% endif %}"></i>{% if venta %}Editar venta{% else %}Crear nueva venta{% endif %}
                        </h2>
                    </div>
                <div class="card-body">
                    {% if errors %}
                <div class="alert alert-danger" role="alert">
                    <h5 class="alert-heading">
                        <i class="fa-solid fa-triangle-exclamation"></i> Errores de validación:
                    </h5>
                    <ul class="mb-0">
                        {% for error in errors %}
                        <li>{{error}}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                <form method="post" action="{% if venta %}/ventas/{{venta.id}}/edit{% else %}/ventas/new{% endif %}">

                    <div class="mb-3">
                        <label for="horario_id"
                        class="form-label">Horario_id <span 
                        class="text-danger">*</span></label>
                        <input
                            type="number"
                            class="form-control"
                            id="horario_id"
                            name="horario_id"
                            value="{% if form_data %}{{ form_data.get('horario_id', '') }}{% elif venta %}{{ venta.horario_id }}{% endif %}"
                            required
                            min="1"> <!-- Esta numeración es correcta en este caso??? por favor revisar, Kary--> 

                        <div class="form-text">El id del horario es obligatorio</div>
                    </div>

                    <div class="mb-3">
                                <label for="precio_total" class="form-label">Precio Total <span class="text-danger">*</span></label>
                                <input
                                    type="number"
                                    class="form-control"
                                    id="precio_total"
                                    name="precio_total"
                                    value="{% if form_data %}{{ form_data.get('precio_total', '') }}{% elif venta %}{{ venta.precio_total }}{% endif %}"
                                    required
                                    min="1"
                                ><!--aquí tambien mirar si el min es correcto, KARY-->
                                <div class="form-text">El precio total de la compra es obligatoria</div>
                            </div>

                            <div class="mb-3">
                                <label for="cantidad" class="form-label">Cantidad<span class="text-danger">*</span></label>
                                <input 
                                    type="number" 
                                    class="form-control"
                                    id="cantidad" 
                                    name="cantidad" 
                                    value="{% if form_data %}{{ form_data.get('cantidad', '') }}{% elif venta %}{{ venta.cantidad }}{% endif %}"
                                    required>
                                    <div class="form-text">La cantidad de entradas es obligatoria</div>
                            </div>

                            <div class="mb-3"> <!-- Esto es lo que he hecho con la IA... hay que revisarlo, Kary-->
                                <label class="form-label">Método de pago</label>
                            <div>
                        <!-- Opción: No especificado -->
                            <div class="form-check form-check-inline">
                                <input 
                                    class="form-check-input" 
                                    type="radio" 
                                    name="metodo_pago" 
                                    id="metodo_pago_none" 
                                    value=""
                                
                                    {% if form_data and form_data.get('metodo_pago') == '' %}
                                    checked
                                    {% elif not metodo_pago or metodo_pago is none %}
                                    checked
                                    {% endif %}>
                                <label class="form-check-label" for="metodo_pago_none">No especificado</label>
                            </div>

                        <!-- Opción: Efectivo -->
                            <div class="form-check form-check-inline">
                                <input 
                                    class="form-check-input" 
                                    type="radio" 
                                    name="metodo_pago" 
                                    id="metodo_pago_efectivo" 
                                    value="efectivo"

                                    {% if form_data and form_data.get('metodo_pago') == 'efectivo' %}
                                    checked
                                    {% elif metodo_pago == 'efectivo' %}
                                    checked
                                    {% endif %}>
                                    <label class="form-check-label" for="metodo_pago_efectivo">Efectivo</label>
                            </div>

                        <!-- Opción: Tarjeta -->
                            <div class="form-check form-check-inline">
                                <input 
                                    class="form-check-input" 
                                    type="radio" 
                                    name="metodo_pago" 
                                    id="metodo_pago_tarjeta" 
                                    value="tarjeta"

                                    {% if form_data and form_data.get('metodo_pago') == 'tarjeta' %}
                                    checked
                                    {% elif metodo_pago == 'tarjeta' %}
                                    checked
                                    {% endif %}>
                                    <label class="form-check-label" for="metodo_pago_tarjeta">Tarjeta</label>
                            </div>

                        <!-- Opción: Transferencia -->
                            <div class="form-check form-check-inline">
                                <input 
                                    class="form-check-input" 
                                    type="radio" 
                                    name="metodo_pago" id="metodo_pago_transferencia" value="transferencia"

                                    {% if form_data and form_data.get('metodo_pago') == 'transferencia' %}
                                    checked
                                    {% elif metodo_pago == 'transferencia' %}
                                    checked
                                    {% endif %}>
                                    <label class="form-check-label" for="metodo_pago_transferencia">Transferencia</label>
                            </div>
                        </div>

                        <div class="d-flex justify-content-between">
                                <a href="/ventas" class="btn btn-secondary">
                                    <i class="fa-solid fa-arrow-left me-2"></i>Cancelar
                                </a>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fa-solid fa-floppy-disk me-2"></i>{% if venta %}Actualizar{% else %}Crear{% endif %} venta
                                </button>
                        </div>
                    </div>
                </form>
            </div>
        </div> 
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

</body>
</html> <!--CREO QUE HA QUEDADO BIEN... POR FAVOR MANU, REVISARLO-->



    
